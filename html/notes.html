<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Note Taker</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/4.1.3/flatly/bootstrap.min.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.1/css/all.css">

</head>

<body>
  <nav class="navbar navbar-dark " style="background-color: #26A3B4;">
    <a class="navbar-brand" href="/">Note Taker</a>
    <a href="#" dir="rtl" style="color: white;"><i class="far fa-edit"></i></a>
  </nav>
   <div class="row">
       <div class="card col-12 col-lg-4 col-xl-4" id="oldNotes" style="background-color: white; border-right: 1px solid black;">
            <!-- <div style="position: relative; background-color: white; border-bottom: 1px solid black; margin-bottom: 5px; margin-top: 5px; height: 40px;">
                <p style="display: inline; margin-top: 25px; font-size: large;">Go to the bank</p>
                <a href="#" style="position: absolute; right: 5px; top: 3px; color: #26A3B4;" class="fas fa-trash-alt" onclick="deleteNote(5)"></a>
            </div> end of task -->
        </div> <!--end of note list section-->
        <div class="col" id="newNote" style="background-color: bisque;">
           <div style="position: relative; background-color: tomato;">
                <form>
                    <div class="mb-3">
                        <input type="text" class="form-control"  placeholder="Enter your note title">
                    </div>
                    <div class="mb-3">
                        <textarea class="form-control" rows="5" placeholder="Enter more info"></textarea>
                    </div>
                </form>
            </div>
        </div> <!--end of new note section-->
   </div> <!--end of row-->
  <script>
    async function getNotes(){

      document.querySelector('#oldNotes').innerHTML = "";

      const notesData = await fetch('/api/notes').then(r => r.json())
      console.log(notesData);
      // notesData[0].noteTitle
      for(i=0; i<notesData.length; i++)
      {
      document.querySelector('#oldNotes').innerHTML += `<div style="position: relative; background-color: white; border-bottom: 1px solid black; margin-bottom: 5px; margin-top: 5px; height: 40px;">
                <p style="display: inline; margin-top: 25px; font-size: large;">${notesData[i].noteTitle}</p>
                <a href="#" style="position: absolute; right: 5px; top: 3px; color: #26A3B4;" class="fas fa-trash-alt" onclick="deleteNote(${notesData[i].id})"></a>
            </div> <!--end of task-->`
      }
    }

    getNotes()


    function postUrl(url, data = {}) {
            const postData = {
                headers: { 'Content-Type': 'application/json' },
                method: 'post',
                body: JSON.stringify(data)
            }
            return fetch(url, postData).then(res => res.json())
        }

    function deleteNote(e){
      alert(`your number was ${e}`)

      let tableID = {id: e}
      postUrl(`/api/notes/delete`, tableID)
      // const notesData = await fetch(`/api/notes/${e}`).then(r => r.json())

      getNotes()
    }
  </script>
</body>

</html>